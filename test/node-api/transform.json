{
  "name": "transforms",
  "request": {
    "method": "POST",
    "base": "http://dev.dictadata.org:8089/node/transfer",
    "auth": "user:user",
    "timeout": 90000
  },
  "expected": {
    "statusCode": 200
  },
  "queries": [
    {
      "name": "mysql-elasticsearch",
      "request": {
        "headers": {
          "Content-Type": "application/json; charset=utf-8"
        },
        "data": {
          "tract": {
            "origin": {
              "smt": ":mysql_foo_schema"
            },
            "terminal": {
              "smt": ":es_foo_transform"
            },
            "transforms": {
              "filter": {
                "match": {
                  "Bar": "row"
                },
                "drop": {
                  "Baz": {
                    "eq": 456
                  }
                }
              },
              "mutate": {
                "default": {
                  "Fie": "where's es fum?"
                },
                "map": {
                  "Foo": "Foo",
                  "Bar": "Bar",
                  "Baz": "Bazzy"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "ia_voters_rows",
      "request": {
        "headers": {
          "Content-Type": "application/json; charset=utf-8"
        },
        "data": {
          "tract": {
            "origin": {
              "smt": "sos.iowa.gov:voter_registration_totals_county",
              "options": {}
            },
            "terminal": {
              "smt": "json|file:../data/output/transforms/|ia_voters_rows.json|*",
              "options": {}
            }
          }
        }
      }
    },
    {
      "name": "ia_voters",
      "request": {
        "headers": {
          "Content-Type": "application/json; charset=utf-8"
        },
        "data": {
          "tract": {
            "origin": {
              "smt": "sos.iowa.gov:voter_registration_totals_county",
              "options": {}
            },
            "transform": {
              "mutate": {
                "map": {
                  "County": "County",
                  "Democratic Active": "Active.Democratic",
                  "Republican Active": "Active.Republican",
                  "No Party Active": "Active.No Party",
                  "Other Active": "Active.Other",
                  "Total Active": "Active.Total",
                  "Democratic Inactive": "Inactive.Democratic",
                  "Republican Inactive": "Inactive.Republican",
                  "No Party Inactive": "Inactive.No Party",
                  "Other Inactive": "Inactive.Other",
                  "Total Inactive": "Inactive.Total",
                  "Grand Total": "Total"
                }
              }
            },
            "terminal": {
              "smt": "json|stream:*|*|*",
              "options": {}
            }
          }
        }
      }
    }
  ]
}
